port: 7890
# socks-port: 7891
# mixed-port: 7890
redir-port: 9797
tproxy-port: 9898
mode: rule
unified-delay: true

allow-lan: false
bind-address: '*'

# silent | error | warning | info | debug
log-level: info
ipv6: true

external-controller: 0.0.0.0:9090 
secret: "clash"
external-ui: /data/adb/box/clash/dashboard
tcp-concurrent: true

geodata-mode: false
# standard | memconservative
geodata-loader: standard
geox-url:
  mmdb: "https://cdn.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/country.mmdb"
  geosite: "https://cdn.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/geosite.dat"
geo-auto-update: true
geo-update-interval: 24

# æ§åˆ¶æ˜¯å¦è®© Clash å»åŒ¹é…è¿›ç¨‹
# always å¼€å¯ï¼Œå¼ºåˆ¶åŒ¹é…æ‰€æœ‰è¿›ç¨‹
# strict é»˜è®¤ï¼Œç”± Clash åˆ¤æ–­æ˜¯å¦å¼€å¯
# off ä¸åŒ¹é…è¿›ç¨‹ï¼Œæ¨èåœ¨è·¯ç”±å™¨ä¸Šä½¿ç”¨æ­¤æ¨¡å¼
# find-process-mode: always

profile:
  store-selected: true
  # å‚¨å­˜ API å¯¹ç­–ç•¥ç»„çš„é€‰æ‹©ï¼Œä»¥ä¾›ä¸‹æ¬¡å¯åŠ¨æ—¶ä½¿ç”¨
  store-fake-ip: false
  # å‚¨å­˜ fakeip æ˜ å°„è¡¨ï¼ŒåŸŸåå†æ¬¡å‘ç”Ÿè¿æ¥æ—¶ï¼Œä½¿ç”¨åŸæœ‰æ˜ å°„åœ°å€

tun:
  enable: false
  device: utun
  mtu: 9000
  stack: system # gvisor / lwip / system
  dns-hijack:
    - any:53
    - tcp://any:53
  auto-route: true
  auto-detect-interface: true

dns:
  enable: true
  ipv6: true
  prefer-h3: true
  default-nameserver:
    - 8.8.8.8
    - 1.1.1.1
  listen: 0.0.0.0:1053
  use-hosts: true
  enhanced-mode: redir-host
  nameserver:
    - 8.8.8.8
    - 1.0.0.1

# hosts:
  # host: ip

p-proxies: &proxies
  - 'ğŸš€ èŠ‚ç‚¹é€‰æ‹©'
  - 'â™»ï¸ è‡ªåŠ¨é€‰æ‹©(all)'
  - 'â™»ï¸ è‡ªåŠ¨é€‰æ‹©(1)'
  - 'â™»ï¸ è‡ªåŠ¨é€‰æ‹©(2)'
  - DIRECT
  - REJECT

proxy-groups:
  - name: 'ğŸš€ èŠ‚ç‚¹é€‰æ‹©'
    type: select
    proxies:
      - 'â™»ï¸ è‡ªåŠ¨é€‰æ‹©(all)'
      - 'â™»ï¸ è‡ªåŠ¨é€‰æ‹©(1)'
      - 'â™»ï¸ è‡ªåŠ¨é€‰æ‹©(2)'
      - DIRECT
      - REJECT
    include-all-providers: true

  - name: 'â™»ï¸ è‡ªåŠ¨é€‰æ‹©(all)'
    type: url-test
    url: 'http://www.gstatic.com/generate_204'
    interval: 3600
    include-all-providers: true

  - name: 'â™»ï¸ è‡ªåŠ¨é€‰æ‹©(1)'
    type: url-test
    url: 'http://www.gstatic.com/generate_204'
    interval: 3600
    use:
      - 'æœºåœº1'

  - name: 'â™»ï¸ è‡ªåŠ¨é€‰æ‹©(2)'
    type: url-test
    url: 'http://www.gstatic.com/generate_204'
    interval: 3600
    use:
      - 'æœºåœº2'

  - name: 'ğŸŒ å›½å¤–åª’ä½“'
    type: select
    proxies: *proxies
    include-all-providers: true

  - name: 'ğŸ“² ç”µæŠ¥ä¿¡æ¯'
    type: select
    proxies: *proxies
    include-all-providers: true

  - name: 'ğŸ è‹¹æœæœåŠ¡'
    type: select
    proxies: *proxies
    include-all-providers: true

  - name: 'ğŸŸ æ¼ç½‘ä¹‹é±¼'
    type: select
    proxies: *proxies
    include-all-providers: true

  - name: 'ğŸ¯ å…¨çƒç›´è¿'
    type: select
    proxies:
      - DIRECT
      - 'ğŸš€ èŠ‚ç‚¹é€‰æ‹©'
      - 'â™»ï¸ è‡ªåŠ¨é€‰æ‹©(all)'
      - REJECT
    include-all-providers: true

  - name: 'ğŸƒ åº”ç”¨å‡€åŒ–'
    type: select
    proxies:
      - REJECT
      - 'ğŸš€ èŠ‚ç‚¹é€‰æ‹©'
      - 'â™»ï¸ è‡ªåŠ¨é€‰æ‹©(all)'
      - DIRECT
    include-all-providers: true

p-url: &url
    type: http
    interval: 86400
    health-check:
      enable: true
      url: http://www.gstatic.com/generate_204
      interval: 3600

proxy-providers:
  "æœºåœº1":
    <<: *url
    path: ./provide/proxy/Frist.yaml
    url: URL

  "æœºåœº2":
    <<: *url
    path: ./provide/proxy/Second.yaml
    url: URL

p-rule: &rule
  type: http
  interval: 86400

rule-providers:
  reject:
    <<: *rule
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/reject.txt"
    path: ./provide/rule/reject.yaml

  icloud:
    <<: *rule
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/icloud.txt"
    path: ./provide/rule/icloud.yaml

  apple:
    <<: *rule
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/apple.txt"
    path: ./provide/rule/apple.yaml

  google:
    <<: *rule
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/google.txt"
    path: ./provide/rule/google.yaml

  proxy:
    <<: *rule
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/proxy.txt"
    path: ./provide/rule/proxy.yaml

  direct:
    <<: *rule
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/direct.txt"
    path: ./provide/rule/direct.yaml

  private:
    <<: *rule
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/private.txt"
    path: ./provide/rule/private.yaml

  gfw:
    <<: *rule
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/gfw.txt"
    path: ./provide/rule/gfw.yaml

  tld-not-cn:
    <<: *rule
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/tld-not-cn.txt"
    path: ./provide/rule/tld-not-cn.yaml

  telegramcidr:
    <<: *rule
    behavior: ipcidr
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/telegramcidr.txt"
    path: ./provide/rule/telegramcidr.yaml

  cncidr:
    <<: *rule
    behavior: ipcidr
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/cncidr.txt"
    path: ./provide/rule/cncidr.yaml

  lancidr:
    <<: *rule
    behavior: ipcidr
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/lancidr.txt"
    path: ./provide/rule/lancidr.yaml

  stun:
    <<: *rule
    behavior: classical
    url: "https://cdn.jsdelivr.net/gh/HDTianRu/clashConfig/provide/rule/stun.yaml"
    path: ./provide/rule/stun.yaml

rules:
  - RULE-SET,private,DIRECT,no-resolve
  - RULE-SET,lancidr,DIRECT
  - GEOIP,LAN,DIRECT
  - 'RULE-SET,reject,ğŸƒ åº”ç”¨å‡€åŒ–'
  - 'GEOSITE,category-ads-all,ğŸƒ åº”ç”¨å‡€åŒ–'
  - 'RULE-SET,icloud,ğŸ è‹¹æœæœåŠ¡'
  - 'RULE-SET,apple,ğŸ è‹¹æœæœåŠ¡'
  - 'RULE-SET,telegramcidr,ğŸ“² ç”µæŠ¥ä¿¡æ¯'
  - 'GEOIP,telegram,ğŸ“² ç”µæŠ¥ä¿¡æ¯'
  - 'GEOSITE,telegram,ğŸ“² ç”µæŠ¥ä¿¡æ¯'
  - 'RULE-SET,stun,ğŸš€ èŠ‚ç‚¹é€‰æ‹©'
  - 'RULE-SET,google,ğŸš€ èŠ‚ç‚¹é€‰æ‹©'
  - 'RULE-SET,proxy,ğŸš€ èŠ‚ç‚¹é€‰æ‹©'
  - 'RULE-SET,direct,ğŸ¯ å…¨çƒç›´è¿,no-resolve'
  - 'RULE-SET,cncidr,ğŸ¯ å…¨çƒç›´è¿'
  - 'GEOIP,CN,ğŸ¯ å…¨çƒç›´è¿'
  - 'MATCH,ğŸŸ æ¼ç½‘ä¹‹é±¼'